<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIPLOMATA GOLD // S.I.</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --gold: #C5A059; --black: #050505; --green: #00FF41; --red: #FF3131; --line: rgba(255,255,255,0.05); }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--black); color: #fff; overflow: hidden; display: flex; flex-direction: column; height: 100vh; }
        
        .fixed-header { flex-shrink: 0; background: #000; border-bottom: 1px solid var(--line); z-index: 1000; position: sticky; top: 0; }
        .top-row { padding: 8px 12px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 0.65em; letter-spacing: 3px; color: var(--gold); font-weight: 900; }
        .time-nav { display: flex; padding: 0 10px 10px; gap: 6px; overflow-x: auto; scrollbar-width: none; }
        .t-btn { background: #0a0a0a; border: 1px solid #111; color: #444; padding: 6px 12px; border-radius: 4px; font-size: 0.55em; font-weight: 800; cursor: pointer; white-space: nowrap; }
        .t-btn.active { background: var(--gold); color: #000; }

        .viewport { flex: 1; overflow-y: auto; padding-bottom: 60px; scroll-behavior: smooth; }
        .section { display: none; width: 100%; }
        .section.active { display: block; }

        /* TABELA COM STICKY HEADER REFORÃ‡ADO */
        .ranking-table { width: 100%; border-collapse: collapse; table-layout: fixed; }
        .ranking-table thead th { 
            position: sticky; top: 0; background: #080808; text-align: right; 
            font-size: 0.52em; color: #555; padding: 15px 8px; 
            border-bottom: 2px solid var(--line); z-index: 50;
        }
        .ranking-table td { padding: 12px 8px; border-bottom: 1px solid var(--line); font-size: 0.78em; text-align: right; font-family: 'Roboto Mono'; }
        
        .col-rank { width: 35px; text-align: left !important; color: var(--gold); font-weight: bold; }
        .col-name { width: 95px; text-align: left !important; color: #eee; font-weight: 700; text-transform: uppercase; font-size: 0.65em; }

        .tab-bar { display: flex; border-top: 1px solid var(--line); background: #080808; position: fixed; bottom: 0; width: 100%; height: 55px; z-index: 1000; }
        .tab-item { flex: 1; display: flex; align-items: center; justify-content: center; color: #333; font-size: 0.65em; font-weight: 800; cursor: pointer; }
        .tab-item.active { color: var(--gold); border-top: 2px solid var(--gold); }
    </style>
</head>
<body>

    <div class="fixed-header">
        <div class="top-row">
            <div class="logo">ðŸ”± DIPLOMATA</div>
            <div id="clock" style="font-size: 0.6em; color: #222; font-family: 'Roboto Mono';">11:28:00</div>
        </div>
        <div class="time-nav">
            <button class="t-btn" onclick="updateTime('15M', this)">15 MIN</button>
            <button class="t-btn active" onclick="updateTime('1H', this)">1 HORA</button>
            <button class="t-btn" onclick="updateTime('24H', this)">24 HORAS</button>
        </div>
    </div>

    <div class="viewport">
        <div id="tab-graf" class="section active">
            <div style="text-align: center; padding: 20px 10px 5px;">
                <div id="main-price" style="font-size: 3.2em; font-weight: 100; letter-spacing: -2px; font-family: 'Roboto Mono';">0,00</div>
            </div>
            <div style="height: 320px; width: 100%; padding: 0 10px;"><canvas id="proChart"></canvas></div>
        </div>

        <div id="tab-data" class="section">
            <table class="ranking-table">
                <thead>
                    <tr>
                        <th class="col-rank">#</th>
                        <th class="col-name">ATIVO</th>
                        <th>ATUAL</th>
                        <th style="width: 55px;">%</th>
                        <th>PROJETADO</th>
                    </tr>
                </thead>
                <tbody id="market-list"></tbody>
            </table>
        </div>
    </div>

    <div class="tab-bar">
        <div class="tab-item active" onclick="nav('tab-graf', this)">GRAF</div>
        <div class="tab-item" onclick="nav('tab-data', this)">DATA</div>
    </div>

    <script>
        let currentMultiplier = 1;
        
        // RANKING EXPANDIDO - TOP 40 (RESTAURADO E AMPLIADO)
        const coins = [
            {n:"Bitcoin", p:482119, v:2.1}, {n:"Ethereum", p:14820, v:1.4}, {n:"Solana", p:965, v:6.2},
            {n:"Cardano", p:2.45, v:2.1}, {n:"BNB", p:3120, v:-0.4}, {n:"XRP", p:3.1, v:0.8},
            {n:"Dogecoin", p:0.85, v:15.2}, {n:"Avalanche", p:182, v:4.7}, {n:"TRON", p:0.78, v:1.1},
            {n:"Polkadot", p:35.1, v:-2.3}, {n:"Chainlink", p:92.3, v:3.1}, {n:"Polygon", p:2.8, v:1.5},
            {n:"Shiba Inu", p:0.0001, v:8.5}, {n:"Litecoin", p:450, v:0.5}, {n:"Near", p:25, v:4.2},
            {n:"Bitcoin Cash", p:2100, v:1.1}, {n:"Uniswap", p:42, v:3.3}, {n:"Arbitrum", p:8.5, v:5.1},
            {n:"Optimism", p:12.4, v:2.8}, {n:"Stellar", p:0.65, v:0.9}, {n:"Monero", p:820, v:1.4},
            {n:"ETC", p:145, v:-0.8}, {n:"Kaspa", p:0.82, v:12.4}, {n:"Stacks", p:15, v:7.2},
            {n:"Pepe", p:0.00004, v:25.1}, {n:"Render", p:52, v:9.4}, {n:"Filecoin", p:28, v:2.1},
            {n:"Aptos", p:48, v:3.5}, {n:"Cosmos", p:45, v:1.2}, {n:"Injective", p:180, v:6.8},
            {n:"Celestia", p:75, v:8.1}, {n:"VeChain", p:0.18, v:4.4}, {n:"Immutable", p:12, v:3.9},
            {n:"Graphs", p:1.4, v:5.6}, {n:"Fantom", p:3.8, v:10.2}, {n:"Aave", p:480, v:2.5},
            {n:"Theta", p:12, v:1.8}, {n:"Quant", p:520, v:-0.5}, {n:"Algorand", p:0.92, v:3.1}, {n:"Flow", p:4.5, v:2.2}
        ];

        function updateTime(period, btn) {
            document.querySelectorAll('.t-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentMultiplier = period === '15M' ? 0.25 : (period === '24H' ? 24 : 1);
            drawList();
        }

        function nav(id, el) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            el.classList.add('active');
            if(id === 'view-data' || id === 'tab-data') drawList();
        }

        function drawList() {
            const b = document.getElementById('market-list');
            b.innerHTML = coins.map((c, i) => {
                const adjV = c.v * currentMultiplier;
                const proj = c.p * (1 + (adjV / 100));
                return `<tr>
                    <td class="col-rank">${i+1}</td>
                    <td class="col-name">${c.n}</td>
                    <td>${c.p.toLocaleString('pt-BR')}</td>
                    <td style="color:${adjV >= 0 ? 'var(--green)' : 'var(--red)'}">${adjV.toFixed(2)}%</td>
                    <td style="color:var(--gold)">${proj.toLocaleString('pt-BR', {maximumFractionDigits: 2})}</td>
                </tr>`;
            }).join('');
        }

        const ctx = document.getElementById('proChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: Array(40).fill(''),
                datasets: [{
                    data: Array(40).fill(481000),
                    borderColor: '#C5A059',
                    borderWidth: 2.5,
                    pointRadius: 0,
                    fill: true,
                    backgroundColor: 'rgba(197, 160, 89, 0.1)',
                    tension: 0.4
                }]
            },
            options: { responsive: true, maintainAspectRatio: false, animation: false, scales: { x: { display: false }, y: { display: false } }, plugins: { legend: { display: false } } }
        });

        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString();
            let last = chart.data.datasets[0].data[39];
            let val = last + (Math.random() - 0.5) * 400;
            chart.data.datasets[0].data.push(val);
            chart.data.datasets[0].data.shift();
            chart.update('none');
            document.getElementById('main-price').innerText = val.toLocaleString('pt-BR', {minimumFractionDigits: 2});
        }, 2000);

        drawList();
    </script>
</body>
</html>
